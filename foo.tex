\usemodule[zhfonts]
  \startMPpage
  def bar(suffix p) =
  begingroup
    p := (5, 4);
  endgroup;
  enddef;
  def foo(expr p) =
    begingroup
      save d; numeric d._d; d._d := 10;
      p := (0, 0);
  endgroup;
enddef;

pair d; d := (1, 2);
foo(d);
    message(xpart d);
%input snail;
%Node a, b, c, d, e;
%a := io("\cbox{\vbox{$i\leftarrow 1$}\vbox{$s\leftarrow 0$}}");
%b := proc_fit("$s\leftarrow s + i$");
%c := proc("$i > 100$", diamond(b));
%d := proc_fit("$i\leftarrow i + 1$");
%e := io("$s$");
%
%b := as_planet(b, a, "bottom");
%c := as_planet(c, b, "bottom");
%d := as_planet(d, c, "right");
%e := as_planet(e, c, "bottom");
%
%path d_to_b; 
%enrich_each_io a, e;
%enrich_each_proc b, c, d;
%d_to_b := walk(d.N, (_n_ _v_(d.N, b.E)), b.E);
%
%draw_each a, b, c, d, e;
%flow_each a.F => b, b => c, d_to_b;
%tagged_flow("是", "right", .4) c => e.F;
%tagged_flow("否", "top", .4) c => d;
\stopMPpage
