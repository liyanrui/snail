\usemodule[zhfonts]
\input snail.tex
\startuseMPgraphic{foo}
def 五角星宫 (suffix name) (expr a) text 定位语句 =
  begingroup % 局部变量环境
  save t, 五角星; numeric t; path 五角星;
  t := 0.38197;
  五角星 := (0, 1) -- t * (cosd 54, sind 54) -- (cosd 18, sind 18) 
    -- t * (cosd 18, -sind 18) -- (cosd 54, -sind 54) -- t * (0, -1)
    -- (-cosd 54, -sind 54) -- t * (-cosd 18, -sind 18) -- (-cosd 18, sind 18)
    -- t * (-cosd 54, sind 54) -- cycle;
  设 "蜗界.框形 = '五角星'";
  设 "蜗界.框.余地 = '1cm'";
  设 "蜗界.框.各向同性 = 'true'";
  宫(name, a) 定位语句;
  恢复默认蜗界;
  endgroup;
enddef;

设 "蜗界.玩笑 = '6pt'";
五角星宫(甲, "蜗居") 位于 原点;
恢复默认蜗界;

呜呼 甲;
关防要塞 甲;
\stopuseMPgraphic

\startTEXpage[offset=4pt]
\useMPgraphic{foo}
\stopTEXpage
